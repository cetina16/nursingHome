{% extends "layout.html" %}
{% block title %}Filter{% endblock %}
{% block content %}

<div class="box">
    <h1 class="title">Filter by Disease</h1>
    <div class="columns">
        <div class="column">
            <div class="box">
                <form action="" method="post" name="filter_disease">
                    <script type=text/javascript src="{{url_for('static', filename='main.js') }}"></script>
                    <div class="field">
                        <label for="disease_filter_id" class="label"> Select Disease  </label>
                        <div class="control">
                            <div class = "select">
                            <select id="filter_disease" name="diseaseid">
                                <option value="{{default}}" >  
                                    Select a Disease 
                                </option> 
                                {% for disease in diseases %}
                                <option value="{{disease[0]}}"> 
                                {{disease[1]}}
                                </option>
                                {% endfor %}
                            </select>
                            </div>
                    
                        </div>
                    </div>
                    <div class="field is-grouped">
                        <div class="control">
                        <button class="button is-light is-medium" name="filter_disease">  Filter  </button>
                        </div>
                    </div>
                </form>
            </div>
            {% if residents %}
            <div class="box">
                    <h3 class="subtitle">Residents with the " {{diseasename[0]}} "</h3>
                    <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
                        {% for resident in residents %}
                        <tr> 
                    
                        <td> {{resident[1] }}</td> 
                    
                        </tr>
                        {% endfor %}
                    </table>
            </div>
            {% endif %}
        </div>
        <div class="column">
            <div class="box">
            <h3 class = "subtitle">Number of diseases owned:</h3>
        
            {% if result %}
            <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
                <tr>
                    <td><h4 >  Number of Residents</h4></td>
                    <td><h4 >Disease/Periodic Activity</h4></td>
                </tr>
                {% for x, y in result.items() %}
                <tr> 
                <td> {{ y  }}</td> 
                <td> {{ x  }}</td> 
                </tr>
                {% endfor %}
            </table>
            {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="box">
    <h1 class="title">Show residents with high risk level-5</h1>
    <div class="columns">
        <div class="column">
            <div class="box">
                <form action="" method="post" name="filter_risk">
                    <div class="field is-grouped">
                        <div class="control">
                        <button class="button is-light is-medium" name="filter_risk">  Show  </button>
                        </div>
                    </div>
                </form>
           
            {% if residents2 %}
            
                    <h3 class="subtitle">Residents </h3>
                    <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
                        {% for resident in residents2 %}
                        <tr> 
                    
                        <td> {{resident[0] }}</td> 
                    
                        </tr>
                        {% endfor %}
                    </table>
            </div>
            {% endif %}
        </div>

        <div class="column">
        <p> By clicking the button you can see the residents who has at least one disease with high risk level. </p>
        </div>
    </div>
</div>

{% endblock %}